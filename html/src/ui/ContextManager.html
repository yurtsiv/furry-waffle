<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.9.2" />
<title>src.ui.ContextManager API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>src.ui.ContextManager</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">from ui.AppMenu import AppMenu
from ui.TorrentsListModel import TorrentsListModel
from ui.TorrentDetailsDialog import TorrentDetailsDialog
from ui.LogsDialog import LogsDialog
from ui.LogsListModel import LogsListModel
from ui.Footer import Footer
from ui.PeerLimitDialog import PeerLimitDialog

from ui.utils import show_error
from logs.Logs import Logs

&#34;&#34;&#34;
A central place for managing all the
controllers and glueing them together.
&#34;&#34;&#34;
class ContextManager():
    def __init__(self, torrent_client):
        super().__init__()

        self.__torrent_client = torrent_client

        self.__logs = Logs()
        self.__logs_dialog = LogsDialog()
        self.__logs_list_model = LogsListModel(logs=self.__logs)
        self.__peer_limit_dialog = PeerLimitDialog(torrent_client=torrent_client)
        self.__torrents_list_model = TorrentsListModel(
            torrent_client=torrent_client, logs=self.__logs, on_peer_limit=self.__peer_limit_dialog.open)
        self.__torrent_details_dialog = TorrentDetailsDialog(
            torrent_client=torrent_client, on_details_accepted=self.on_details_accepted)
        self.__app_menu = AppMenu(
            on_file_selected=self.on_file_selected, on_logs_open=self.on_logs_open, torrent_client=torrent_client)
        self.__footer = Footer(torrent_client=torrent_client)

    def on_file_selected(self, file_url):
        self.__torrent_details_dialog.open(file_url)

    def on_logs_open(self):
        try:
            _ = self.__logs.all_logs
            self.__logs_list_model.refresh()
            self.__logs_dialog.open()
        except:
            show_error(&#39;Failed to open logs&#39;)

    def on_details_accepted(self, file_url, download_dir):
        try:
            torrent = self.__torrent_client.add_torrent(
                file_url, download_dir=download_dir)
            self.__torrents_list_model.add_item(torrent)
            self.__logs.add_log(torrent, &#39;Torrent added&#39;)
        except FileNotFoundError:
            show_error(&#39;Torrent file is not found. Please try again&#39;)
        except Exception as err:
            show_error(str(err))

    def set_window(self, window):
        &#34;&#34;&#34;
        Propagate window object to individual controllers
        &#34;&#34;&#34;
        self.__torrent_details_dialog.window = window
        self.__logs_dialog.window = window
        self.__footer.window = window
        self.__peer_limit_dialog.window = window

    def clean_up(self):
        &#34;&#34;&#34;
        Clear all resources/timers
        &#34;&#34;&#34;
        self.__torrents_list_model.clean_up()
        self.__footer.clean_up()
        self.__logs.save_logs()

    @property
    def app_menu(self):
        return self.__app_menu

    @property
    def torrents_list_model(self):
        return self.__torrents_list_model

    @property
    def torrent_details_dialog(self):
        return self.__torrent_details_dialog

    @property
    def logs_list_model(self):
        return self.__logs_list_model
    
    @property
    def peer_limit_dialog(self):
        return self.__peer_limit_dialog</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="src.ui.ContextManager.ContextManager"><code class="flex name class">
<span>class <span class="ident">ContextManager</span></span>
<span>(</span><span>torrent_client)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ContextManager():
    def __init__(self, torrent_client):
        super().__init__()

        self.__torrent_client = torrent_client

        self.__logs = Logs()
        self.__logs_dialog = LogsDialog()
        self.__logs_list_model = LogsListModel(logs=self.__logs)
        self.__peer_limit_dialog = PeerLimitDialog(torrent_client=torrent_client)
        self.__torrents_list_model = TorrentsListModel(
            torrent_client=torrent_client, logs=self.__logs, on_peer_limit=self.__peer_limit_dialog.open)
        self.__torrent_details_dialog = TorrentDetailsDialog(
            torrent_client=torrent_client, on_details_accepted=self.on_details_accepted)
        self.__app_menu = AppMenu(
            on_file_selected=self.on_file_selected, on_logs_open=self.on_logs_open, torrent_client=torrent_client)
        self.__footer = Footer(torrent_client=torrent_client)

    def on_file_selected(self, file_url):
        self.__torrent_details_dialog.open(file_url)

    def on_logs_open(self):
        try:
            _ = self.__logs.all_logs
            self.__logs_list_model.refresh()
            self.__logs_dialog.open()
        except:
            show_error(&#39;Failed to open logs&#39;)

    def on_details_accepted(self, file_url, download_dir):
        try:
            torrent = self.__torrent_client.add_torrent(
                file_url, download_dir=download_dir)
            self.__torrents_list_model.add_item(torrent)
            self.__logs.add_log(torrent, &#39;Torrent added&#39;)
        except FileNotFoundError:
            show_error(&#39;Torrent file is not found. Please try again&#39;)
        except Exception as err:
            show_error(str(err))

    def set_window(self, window):
        &#34;&#34;&#34;
        Propagate window object to individual controllers
        &#34;&#34;&#34;
        self.__torrent_details_dialog.window = window
        self.__logs_dialog.window = window
        self.__footer.window = window
        self.__peer_limit_dialog.window = window

    def clean_up(self):
        &#34;&#34;&#34;
        Clear all resources/timers
        &#34;&#34;&#34;
        self.__torrents_list_model.clean_up()
        self.__footer.clean_up()
        self.__logs.save_logs()

    @property
    def app_menu(self):
        return self.__app_menu

    @property
    def torrents_list_model(self):
        return self.__torrents_list_model

    @property
    def torrent_details_dialog(self):
        return self.__torrent_details_dialog

    @property
    def logs_list_model(self):
        return self.__logs_list_model
    
    @property
    def peer_limit_dialog(self):
        return self.__peer_limit_dialog</code></pre>
</details>
<h3>Instance variables</h3>
<dl>
<dt id="src.ui.ContextManager.ContextManager.app_menu"><code class="name">var <span class="ident">app_menu</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def app_menu(self):
    return self.__app_menu</code></pre>
</details>
</dd>
<dt id="src.ui.ContextManager.ContextManager.logs_list_model"><code class="name">var <span class="ident">logs_list_model</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def logs_list_model(self):
    return self.__logs_list_model</code></pre>
</details>
</dd>
<dt id="src.ui.ContextManager.ContextManager.peer_limit_dialog"><code class="name">var <span class="ident">peer_limit_dialog</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def peer_limit_dialog(self):
    return self.__peer_limit_dialog</code></pre>
</details>
</dd>
<dt id="src.ui.ContextManager.ContextManager.torrent_details_dialog"><code class="name">var <span class="ident">torrent_details_dialog</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def torrent_details_dialog(self):
    return self.__torrent_details_dialog</code></pre>
</details>
</dd>
<dt id="src.ui.ContextManager.ContextManager.torrents_list_model"><code class="name">var <span class="ident">torrents_list_model</span></code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def torrents_list_model(self):
    return self.__torrents_list_model</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="src.ui.ContextManager.ContextManager.clean_up"><code class="name flex">
<span>def <span class="ident">clean_up</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"><p>Clear all resources/timers</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def clean_up(self):
    &#34;&#34;&#34;
    Clear all resources/timers
    &#34;&#34;&#34;
    self.__torrents_list_model.clean_up()
    self.__footer.clean_up()
    self.__logs.save_logs()</code></pre>
</details>
</dd>
<dt id="src.ui.ContextManager.ContextManager.on_details_accepted"><code class="name flex">
<span>def <span class="ident">on_details_accepted</span></span>(<span>self, file_url, download_dir)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_details_accepted(self, file_url, download_dir):
    try:
        torrent = self.__torrent_client.add_torrent(
            file_url, download_dir=download_dir)
        self.__torrents_list_model.add_item(torrent)
        self.__logs.add_log(torrent, &#39;Torrent added&#39;)
    except FileNotFoundError:
        show_error(&#39;Torrent file is not found. Please try again&#39;)
    except Exception as err:
        show_error(str(err))</code></pre>
</details>
</dd>
<dt id="src.ui.ContextManager.ContextManager.on_file_selected"><code class="name flex">
<span>def <span class="ident">on_file_selected</span></span>(<span>self, file_url)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_file_selected(self, file_url):
    self.__torrent_details_dialog.open(file_url)</code></pre>
</details>
</dd>
<dt id="src.ui.ContextManager.ContextManager.on_logs_open"><code class="name flex">
<span>def <span class="ident">on_logs_open</span></span>(<span>self)</span>
</code></dt>
<dd>
<div class="desc"></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def on_logs_open(self):
    try:
        _ = self.__logs.all_logs
        self.__logs_list_model.refresh()
        self.__logs_dialog.open()
    except:
        show_error(&#39;Failed to open logs&#39;)</code></pre>
</details>
</dd>
<dt id="src.ui.ContextManager.ContextManager.set_window"><code class="name flex">
<span>def <span class="ident">set_window</span></span>(<span>self, window)</span>
</code></dt>
<dd>
<div class="desc"><p>Propagate window object to individual controllers</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_window(self, window):
    &#34;&#34;&#34;
    Propagate window object to individual controllers
    &#34;&#34;&#34;
    self.__torrent_details_dialog.window = window
    self.__logs_dialog.window = window
    self.__footer.window = window
    self.__peer_limit_dialog.window = window</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="src.ui" href="index.html">src.ui</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="src.ui.ContextManager.ContextManager" href="#src.ui.ContextManager.ContextManager">ContextManager</a></code></h4>
<ul class="">
<li><code><a title="src.ui.ContextManager.ContextManager.app_menu" href="#src.ui.ContextManager.ContextManager.app_menu">app_menu</a></code></li>
<li><code><a title="src.ui.ContextManager.ContextManager.clean_up" href="#src.ui.ContextManager.ContextManager.clean_up">clean_up</a></code></li>
<li><code><a title="src.ui.ContextManager.ContextManager.logs_list_model" href="#src.ui.ContextManager.ContextManager.logs_list_model">logs_list_model</a></code></li>
<li><code><a title="src.ui.ContextManager.ContextManager.on_details_accepted" href="#src.ui.ContextManager.ContextManager.on_details_accepted">on_details_accepted</a></code></li>
<li><code><a title="src.ui.ContextManager.ContextManager.on_file_selected" href="#src.ui.ContextManager.ContextManager.on_file_selected">on_file_selected</a></code></li>
<li><code><a title="src.ui.ContextManager.ContextManager.on_logs_open" href="#src.ui.ContextManager.ContextManager.on_logs_open">on_logs_open</a></code></li>
<li><code><a title="src.ui.ContextManager.ContextManager.peer_limit_dialog" href="#src.ui.ContextManager.ContextManager.peer_limit_dialog">peer_limit_dialog</a></code></li>
<li><code><a title="src.ui.ContextManager.ContextManager.set_window" href="#src.ui.ContextManager.ContextManager.set_window">set_window</a></code></li>
<li><code><a title="src.ui.ContextManager.ContextManager.torrent_details_dialog" href="#src.ui.ContextManager.ContextManager.torrent_details_dialog">torrent_details_dialog</a></code></li>
<li><code><a title="src.ui.ContextManager.ContextManager.torrents_list_model" href="#src.ui.ContextManager.ContextManager.torrents_list_model">torrents_list_model</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc"><cite>pdoc</cite> 0.9.2</a>.</p>
</footer>
</body>
</html>